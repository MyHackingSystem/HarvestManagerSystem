
CREATE VIEW Farm_For_Insert AS
SELECT s.PlantingDate,
    s.HarvestDate,
    f.FarmName,
    f.FarmAddress
FROM Season s
    INNER JOIN Farm f ON s.FarmId = f.FarmId


/////////////////////

INSERT INTO Farm_For_Insert
(
    PlantingDate,
    HarvestDate,
    FarmName,
    FarmAddress
)
VALUES
(
    '2021-02-14 00:00:00',
    '2021-02-14 00:00:00',
    'name',
    'address'
)

//////////////////////


CREATE TRIGGER insert_farm_season
INSTEAD OF INSERT
ON Farm_For_Insert
    
BEGIN
    
INSERT INTO Farm (FarmName, FarmAddress)
SELECT NEW.FarmName, NEW.FarmAddress
WHERE NOT EXISTS
    (SELECT 1 FROM Farm
     WHERE FarmName = NEW.FarmName);
        
INSERT INTO Season (PlantingDate, HarvestDate, FarmId)
SELECT NEW.PlantingDate, NEW.HarvestDate, Farm.FarmId
FROM Farm
WHERE Farm.FarmName = NEW.FarmName;
    
END

//////////////


DROP TRIGGER insert_products_detail

///////////

DROP VIEW Product_For_Insert