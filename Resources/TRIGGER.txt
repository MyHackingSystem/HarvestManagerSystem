
CREATE VIEW Product_For_Insert AS
SELECT pd.ProductType,
    pd.ProductCode,
    pd.PriceEmployee,
    pd.PriceCompany,
    p.ProductName
FROM ProductDetail pd
    INNER JOIN Product p ON pd.ProductId = p.ProductId


/////////////////////

INSERT INTO Product_For_Insert
(
    ProductType,
    ProductCode,
    PriceEmployee,
    PriceCompany,
    ProductName
)
VALUES
(
    'type',
    'code',
    10.0,
    20.0,
    'name'
)

//////////////////////


CREATE TRIGGER insert_products_detail
INSTEAD OF INSERT
ON Product_For_Insert
    
BEGIN
    
INSERT INTO Product (ProductName)
SELECT NEW.ProductName
WHERE NOT EXISTS
    (SELECT 1 FROM Product
     WHERE ProductName = NEW.ProductName);
        
INSERT INTO ProductDetail (ProductType, ProductCode, PriceEmployee, PriceCompany, ProductId)
SELECT NEW.ProductType, NEW.ProductCode, NEW.PriceEmployee, NEW.PriceCompany, Product.ProductId
FROM Product
WHERE Product.ProductName = NEW.ProductName;
    
END

//////////////


DROP TRIGGER insert_products_detail

///////////

DROP VIEW Product_For_Insert